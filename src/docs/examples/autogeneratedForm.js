import React, { useState, useEffect } from 'react';
import { WafoFormHooks, WafoFormInput } from '../../../lib';
import '../styles.css';

const testValues = {
  experimento: 'A ver',
  name0: 'A ver 0',
};

function AutogeneratedForm() {
  const [count, setCount] = useState(0);
  const [form, setForm] = useState([]);

  useEffect(() => {
    function createForm() {
      const newForm = [];
      for (let i = 0; i < count; i++) {
        const name = (
          <WafoFormInput
            key={i}
            type="text"
            name={`name${i}`}
            placeholder="Nombre del equipo"
            label="Nombre del equipo"
            customClass="col-12 col-md-4"
            validations={{ required: true, 'text-spanish': true }}
          />
        );
        newForm.push(name);
      }
      setForm(newForm);
    }
    createForm();
  }, [count]);

  const addForm = () => setCount(count + 1);

  return (
    <div className="simple-form">

      <button type="button" onClick={addForm}>Add form</button>

      <WafoFormHooks values={testValues}>

        <div style={{ width: '100%' }}>
          <p>A ver al cine dijo el gaytis</p>
        </div>

        <WafoFormInput
          type="text"
          name="experimento"
          placeholder="Experimento"
          label="Experimento"
          customClass="col-12 col-md-4"
          validations={{ required: true, 'text-spanish': true }}
        />

        {form}

      </WafoFormHooks>
    </div>
  );
}

export default AutogeneratedForm;
